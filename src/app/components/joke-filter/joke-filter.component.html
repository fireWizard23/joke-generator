
<p *ngIf="joke">
    {{joke | async | json}}
</p>


<form [formGroup]="form" 
(ngSubmit)="onFormSubmit(form.value)"
>
    <div class="categories input-container"
    formArrayName="categories"
    >
        <label 
        *ngFor="let c of categories.controls; let i = index;"
        for="{{c.value.name}}"
        [formGroupName]="i"
        >
            <input type="checkbox" name="categories"  id={{c.value.name}} 
            formControlName="value"
            (change)="onCategoriesChange($event)"
            >
            {{c.value.name}} 
            {{c.value.value}}
            <br>
        </label>
    </div>
    <div class="flags input-container"
    formArrayName="blacklistFlags"
    >
        <h3>Blacklist Flags</h3>
        <label 
        *ngFor="let c of blacklistFlags.controls; let i = index;"
        for="{{c.value.name}}"
        [formGroupName]="i"
        >
            <input type="checkbox" name="blacklistFlags"  id={{c.value.name}} 
            formControlName="value"
            >
            {{c.value.name}} 
            {{c.value.value}}
            <br>
        </label>
    </div>
    <div class="type input-container"
    formArrayName="type"
    >
        <h3>Joke Type</h3>
        <label 
        *ngFor="let c of type.controls; let i = index;"
        for="{{c.value.name}}"
        [formGroupName]="i"
        >
            <input type="checkbox" name="type"  id={{c.value.name}} 
            formControlName="value"
            (change)="onTypeChange($event)"
            >
            {{c.value.displayName || c.value.name}} 
            {{c.value.value}}
            <br>
        </label>
        <p class="warning"  *ngIf="oneTypeIsChecked">
            There must be atleast one value
        </p>
    </div>
    <div class="input-container contains">
        <label for="contains">
            Contains: 
            <input type="text" id="contains" formControlName="contains">
        </label>
    </div>
    
    <input type="submit" value="Submit" >
</form>